# Capítulo III: Requirements Specification

## 3.1. User Stories.

Las User Stories son una herramienta fundamental para definir los requisitos del proyecto. Cada User Story incluye criterios de aceptación que deben ser comprobables y redactados en tiempo presente, tercera persona, siguiendo la estructura de Gherkin (Given-When-Then). Además, se consideran User Stories para el sitio web estático (Landing Page) y Technical Stories para los features del RESTful API.

### Épicas del Proyecto
- **EPIC001 – Landing Page y Web Pública**
- **EPIC002 – Identidad, Cuentas y Perfiles**
- **EPIC003 – Gestión de Hoteles, Clases y Habitaciones**
- **EPIC004 – IoT, Servicios de Habitación y Dispositivos**

---

### EPIC001 – Landing Page y Web Pública
| **Story ID** | **Título**                           | **Descripción**                                                                                                                                                                  | **Criterios de Aceptación**                                                                                                                                                                                                                                                                                                                                                                                                                               | **Relacionado con (Epic ID)** |
|--------------|--------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
| US001        | Home y navegación principal          | Como *visitante*, quiero ver la página inicial con hero, header y footer, para entender rápidamente qué es la plataforma y cómo navegar.                                       | **CA1:** Dado que el visitante ingresa a la URL principal, cuando la landing carga, entonces se debe mostrar el hero con el mensaje principal, el header con el menú y el footer con la información básica del proyecto. <br> **CA2:** Dado que el visitante hace clic en las opciones del header (por ejemplo “About”, “Planes”, “Contacto”), cuando selecciona una opción, entonces la página debe hacer scroll o navegar a la sección correspondiente sin errores. | EPIC001                       |
| US002        | Sección “About us / About the Product” | Como *visitante*, quiero ver una sección “About” que explique quiénes somos y qué hace el producto, para confiar en la solución que se ofrece.                                | **CA1:** Dado que el visitante se desplaza a la sección “About”, cuando la sección es visible, entonces debe mostrar un texto descriptivo del equipo/proyecto y un resumen de las capacidades principales del sistema. <br> **CA2:** Dado que el visitante quiere más contexto, cuando hace scroll completo en la sección, entonces debe encontrar al menos un bloque que explique cómo la plataforma ayuda a gestionar hoteles, reservas y dispositivos IoT.                    | EPIC001                       |
| US003        | Sección de planes y precios          | Como *visitante*, quiero ver una sección de precios/planes para crear un hotel, para saber qué opción se ajusta a mis necesidades.                                             | **CA1:** Dado que el visitante accede a la sección de planes, cuando esta se muestra, entonces debe listar claramente los planes disponibles y el precio asociado a cada uno. <br> **CA2:** Dado que el visitante está evaluando un plan, cuando hace clic en el botón o enlace de un plan, entonces debe ser redirigido hacia el flujo definido para comenzar la creación o contratación de un hotel (por ejemplo, registro o pantalla de prices).                               | EPIC001                       |
| US004        | Sección de contacto                  | Como *visitante*, quiero una sección de contacto en la landing, para poder enviar dudas o solicitudes de información.                                                          | **CA1:** Dado que el visitante navega a “Contacto”, cuando ve el formulario, entonces debe encontrar campos para nombre, correo y mensaje, y poder completarlos sin errores de maquetación. <br> **CA2:** Dado que el visitante envía el formulario con datos válidos, cuando presiona el botón de envío, entonces el sistema debe procesar la solicitud y mostrar un mensaje de confirmación visible en la misma página.                                              | EPIC001                       |
| US005        | Despliegue público de la landing     | Como *equipo de producto*, quiero tener la landing desplegada públicamente, para que cualquier interesado pueda acceder a la información del proyecto.                        | **CA1:** Dado que se realiza el despliegue, cuando se ingresa a la URL pública, entonces la landing debe cargarse correctamente y mostrar todas las secciones configuradas (home, about, planes, contacto, footer). <br> **CA2:** Dado que se valida el despliegue, cuando se prueba la navegación entre secciones desde distintos dispositivos, entonces la experiencia debe mantenerse funcional (sin enlaces rotos ni errores de carga).                                 | EPIC001                       |

---

### EPIC002 – Identidad, Cuentas y Perfiles
| **Story ID** | **Título**                                   | **Descripción**                                                                                                                                                                          | **Criterios de Aceptación**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | **Relacionado con (Epic ID)** |
|--------------|----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
| US006        | Inicio de sesión (sign-in)                   | Como *usuario*, quiero iniciar sesión en la plataforma, para acceder al panel y a mis datos según mi rol.                                                                              | **CA1:** Dado que el usuario ingresa su correo y contraseña en la pantalla de sign-in, cuando envía el formulario con credenciales válidas, entonces el backend debe autenticarlo usando el endpoint de sign-in y guardar el token en cookies con una vigencia de 7 días. <br> **CA2:** Dado que el usuario ingresa credenciales inválidas, cuando intenta iniciar sesión, entonces el sistema debe rechazar el acceso y mostrar un mensaje de error sin crear cookies de sesión.                                                                                      | EPIC002                       |
| US007        | Verificación automática de sesión (auth-me)  | Como *usuario autenticado*, quiero que la app verifique si ya estoy logueado, para no tener que iniciar sesión de nuevo mientras mi sesión siga vigente.                              | **CA1:** Dado que el usuario abre la aplicación web teniendo una cookie de sesión válida, cuando el frontend llama al endpoint `auth-me`, entonces el backend debe devolver los datos de cuenta/perfil y la aplicación debe entrar directamente al dashboard sin mostrar la pantalla de login. <br> **CA2:** Dado que la cookie ha expirado o no existe, cuando el frontend llama a `auth-me`, entonces la API debe indicar que no hay sesión válida y la aplicación debe redirigir al usuario a la pantalla de inicio de sesión.                                                   | EPIC002                       |
| US008        | Refresh de token de sesión (refresh-token)   | Como *usuario autenticado*, quiero que mi token se renueve automáticamente, para seguir usando la app sin tener que iniciar sesión cada pocos días.                                   | **CA1:** Dado que el usuario tiene una sesión válida cercana a expirar, cuando el frontend llama al endpoint `refresh-token`, entonces el backend debe emitir un nuevo token y actualizar la cookie por otros 7 días sin requerir al usuario volver a loguearse. <br> **CA2:** Dado que el token o cookie ya no son válidos (por ejemplo, manipulados o expirados), cuando se intenta ejecutar `refresh-token`, entonces el backend debe rechazar la operación y forzar al usuario a autenticarse nuevamente.                                          | EPIC002                       |
| US009        | Gestión de perfiles de huésped (Guest Profile) | Como *administrador*, quiero crear, consultar, actualizar y eliminar perfiles de huéspedes, para gestionar sus datos y la cuenta asociada al guest.                                  | **CA1:** Dado que el administrador registra un nuevo huésped, cuando utiliza el endpoint correspondiente de guest profile, entonces el sistema debe crear tanto el perfil como la cuenta asociada y poder consultarlos posteriormente por ID o por guest Id. <br> **CA2:** Dado que el administrador necesita actualizar o eliminar un huésped existente, cuando invoca los endpoints de update o delete, entonces los cambios deben reflejarse en el perfil y la cuenta, y las búsquedas posteriores deben mostrar el estado actualizado.                          | EPIC002                       |
| US010        | Gestión de perfiles de administrador          | Como *equipo del sistema*, quiero crear, consultar, actualizar y eliminar perfiles de administradores, para controlar quién puede gestionar hoteles, habitaciones y reservas.         | **CA1:** Dado que se crea un nuevo administrador desde el módulo correspondiente, cuando se llama al endpoint de creación de administrator profile, entonces el sistema debe crear el perfil y la cuenta vinculada, dejando disponible la consulta por ID y por accountId. <br> **CA2:** Dado que se requiere modificar o retirar acceso a un administrador existente, cuando se usan los endpoints de update o delete, entonces el perfil y su cuenta deben quedar actualizados o deshabilitados, y ya no deberá poder autenticarse si fue eliminado. | EPIC002                       |

---

### EPIC003 – Gestión de Hoteles, Clases y Habitaciones
| **Story ID** | **Título**                                    | **Descripción**                                                                                                                                                                      | **Criterios de Aceptación**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | **Relacionado con (Epic ID)** |
|--------------|-----------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
| US011        | Gestión de hoteles                            | Como *administrador*, quiero crear, consultar, actualizar y eliminar hoteles, para gestionar la información básica de cada propiedad.                                              | **CA1:** Dado que el administrador registra un hotel nuevo, cuando usa el endpoint de creación de hotel, entonces el sistema debe guardar el hotel con su RUC y permitir su consulta posterior por ID y por RUC. <br> **CA2:** Dado que el administrador necesita actualizar o eliminar un hotel, cuando utilice los endpoints de update o delete, entonces la información debe reflejarse en las consultas posteriores y el hotel eliminado ya no debe aparecer en listados activos.                                                               | EPIC003                       |
| US012        | Gestión de clases de habitación (Room Class)  | Como *administrador*, quiero definir clases de habitación asociadas a un hotel, para organizar el inventario por tipo (por ejemplo, estándar, suite, etc.).                        | **CA1:** Dado que el administrador define una nueva room class, cuando usa el endpoint de creación indicando el hotelId, entonces el sistema debe vincular correctamente la clase al hotel y permitir su consulta por ID y por hotelId. <br> **CA2:** Dado que el administrador necesita modificar o eliminar una room class, cuando llama a los endpoints de update o delete, entonces las habitaciones futuras deberán respetar la nueva configuración o dejar de usar la clase eliminada según corresponda.                         | EPIC003                       |
| US013        | Gestión de habitaciones (Rooms)               | Como *administrador*, quiero crear, consultar, actualizar y eliminar habitaciones, para controlar el inventario físico de cada hotel y su clase asociada.                          | **CA1:** Dado que se crea una habitación nueva, cuando el administrador usa el endpoint de creación con hotelId y roomClass, entonces el sistema debe registrar la habitación y permitir obtenerla por ID, por hotelId y por roomClass. <br> **CA2:** Dado que se requiere modificar o retirar una habitación, cuando se usan los endpoints de update o delete, entonces las consultas posteriores por hotel o por clase deben mostrar el estado actualizado (incluyendo que la habitación ya no aparece si fue eliminada).                             | EPIC003                       |
| US014        | Gestión de reservas en backend (Bookings API) | Como *administrador*, quiero crear, consultar y cancelar reservas usando los endpoints de bookings, para controlar la ocupación del hotel.                                         | **CA1:** Dado que existe un huésped y una habitación válidos, cuando se invoca el endpoint para crear una booking por roomId y guestId (o por guest code y roomId), entonces el sistema debe registrar la reserva y permitir consultarla por ID, por guestId y por hotelId. <br> **CA2:** Dado que el administrador necesita cancelar una reserva, cuando llama al endpoint de cancel booking con el bookingId, entonces la reserva debe cambiar de estado y dejar de aparecer como activa en las consultas por hotelId. | EPIC003                       |
| US015        | Pantalla web de reservas del hotel            | Como *administrador del hotel*, quiero ver una pantalla con las reservas actuales del hotel, para tener visibilidad rápida de la ocupación y los huéspedes.                        | **CA1:** Dado que el administrador ingresa a la pantalla de bookings, cuando esta se carga, entonces debe mostrar el listado de reservas del hotel actual consumiendo los endpoints de bookings por hotelId. <br> **CA2:** Dado que el administrador necesita revisar una reserva específica, cuando selecciona una fila del listado, entonces la interfaz debe mostrar los detalles básicos de la reserva (huésped, habitación, fechas, estado) obtenidos desde el backend.                                                       | EPIC003                       |

---

### EPIC004 – IoT, Servicios de Habitación y Dispositivos
| **Story ID** | **Título**                                     | **Descripción**                                                                                                                                                                        | **Criterios de Aceptación**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | **Relacionado con (Epic ID)** |
|--------------|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
| US016        | Dashboard IoT web                              | Como *administrador del hotel*, quiero ver un dashboard IoT con los valores de los sensores y el estado de los actuadores, para monitorear lo que envía el Edge y el embeded.       | **CA1:** Dado que el administrador abre el dashboard IoT, cuando la pantalla se carga, entonces debe consultar al backend/Edge y mostrar los valores actuales de los sensores expuestos (por ejemplo, datos provenientes del MQTT local). <br> **CA2:** Dado que el administrador observa el estado de los actuadores (por ejemplo, servos o LEDs), cuando estos cambian en el Edge/embeded, entonces el dashboard debe reflejar el nuevo estado en la interfaz tras la actualización correspondiente.                                                          | EPIC004                       |
| US017        | Gestión web de pedidos de huésped              | Como *administrador o staff*, quiero ver una pantalla con los pedidos de servicio de habitación de los huéspedes, para poder gestionar y atender estas solicitudes.                 | **CA1:** Dado que el staff ingresa a la pantalla de pedidos, cuando la vista se carga, entonces debe listar los pedidos generados por los huéspedes, mostrando al menos huésped, habitación y tipo de servicio solicitado. <br> **CA2:** Dado que el staff actualiza el estado de un pedido, cuando marca un pedido como atendido o en progreso, entonces el cambio debe guardarse y reflejarse en el listado (y quedar disponible para futuras consultas).                                                                  | EPIC004                       |
| US018        | App móvil – Solicitud de servicio a la habitación | Como *huésped*, quiero usar la app móvil para solicitar servicios a la habitación, para pedir atención sin llamar por teléfono.                                                       | **CA1:** Dado que el huésped está autenticado en la app móvil, cuando ingresa a la interfaz de servicio a la habitación y selecciona un tipo de servicio, entonces la app debe enviar la solicitud al backend y esta debe aparecer en la pantalla de pedidos del staff. <br> **CA2:** Dado que el huésped envía un pedido, cuando la operación se completa, entonces la app debe mostrar una confirmación visible de que el pedido fue enviado correctamente o un mensaje de error si no se pudo registrar.                                    | EPIC004                       |
| US019        | App móvil – Emisión de llave NFC               | Como *huésped*, quiero que la app móvil emita una señal NFC con mi llave actual, para poder usar el móvil como credencial de acceso definida en mi guest profile.                    | **CA1:** Dado que el huésped dispone de una llave NFC configurada en su guest profile, cuando abre la función de emisión de llave en la app, entonces la aplicación debe leer el atributo correspondiente y activar la señal NFC con esa información. <br> **CA2:** Dado que el huésped no tiene una llave válida configurada, cuando intenta emitir la llave NFC, entonces la app debe mostrar un mensaje indicando que no existe una llave configurada y no debe activar la emisión.                                               | EPIC004                       |
| US020        | Integración Edge–Embeded y despliegue IoT      | Como *equipo técnico*, quiero tener el Edge conectado al prototipo embeded mediante MQTT local y endpoints para servos y LEDs, para controlar los dispositivos físicos en operación. | **CA1:** Dado que se configura el MQTT local en el Edge, cuando el prototipo embeded se conecta, entonces debe poder publicar y suscribirse a los tópicos definidos sin depender del servidor de HiveMQ y permitir el control básico de los actuadores. <br> **CA2:** Dado que el Edge expone endpoints para controlar servos y encender/apagar LEDs, cuando se invocan dichos endpoints desde el sistema (por ejemplo, desde el dashboard), entonces los actuadores del prototipo físico deben responder y el entorno debe estar desplegado y accesible para pruebas. | EPIC004                       |




## 3.2. Impact Mapping.

##### Segmento 1: Empresas Hoteleras
![Impact Map Empresas Hoteleras](/assets/Impact%20map%20Admin.png)

##### Segmento 2: Huespedes
![Impact Map Huespedes](/assets/Impact%20map%20huesped.png)

## 3.3 Product Backlog

| **Order** | **User Story ID** | **Título**                                          | **Descripción**                                                                                         | **Story Points** |
|-----------|--------------------|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|------------------|
| 1         | US006              | Inicio de sesión (sign-in)                           | Permitir que usuarios del sistema (admin/guest) inicien sesión y obtengan sesión segura (cookies).        | 5                |
| 2         | US007              | Verificación automática de sesión (auth-me)          | Identificar si el usuario ya tiene sesión activa y evitar logins innecesarios.                           | 3                |
| 3         | US008              | Refresh de token                                     | Mantener la sesión viva por 7 días sin forzar nuevo inicio de sesión.                                    | 3                |
| 4         | US009              | Gestión de guest profiles                            | Crear, obtener, actualizar y eliminar perfiles de huéspedes.                                             | 5                |
| 5         | US010              | Gestión de admin profiles                            | Crear, obtener, actualizar y eliminar perfiles de administradores.                                       | 5                |
| 6         | US011              | Gestión de hoteles                                   | Crear, actualizar, obtener y eliminar registros de hoteles.                                              | 8                |
| 7         | US012              | Gestión de clases de habitación (Room Class)         | Crear, obtener, actualizar y eliminar clases de habitación asociadas a un hotel.                         | 5                |
| 8         | US013              | Gestión de habitaciones (Rooms)                      | Crear, obtener, actualizar y eliminar habitaciones.                                                      | 5                |
| 9         | US014              | Gestión de reservas (Bookings API)                   | Crear reserva por guestId/guestCode, obtener por hotel/guest, cancelar reservas.                         | 8                |
| 10        | US015              | Pantalla web de reservas                             | Mostrar reservas por hotelId y permitir explorarlas desde la interfaz web.                               | 5                |
| 11        | US016              | Dashboard IoT                                         | Mostrar sensores del Edge y estados de actuadores (servos/LEDs).                                         | 8                |
| 12        | US017              | Gestión de pedidos de huéspedes                       | Pantalla web para staff con pedidos de room-service provenientes del móvil del huésped.                  | 5                |
| 13        | US018              | App móvil – Solicitar servicio                        | Interfaz del huésped para enviar pedidos de servicio a la habitación.                                    | 5                |
| 14        | US019              | App móvil – Emisión de llave NFC                      | Enviar la llave del huésped desde su guest profile hacia el lector NFC físico.                           | 8                |
| 15        | US020              | Integración Edge–Embeded                               | MQTT local + endpoints del Edge + prototipo físico embebido funcionando en conjunto.                     | 13               |
| 16        | US001              | Landing – Home y navegación                           | Landing con hero, header, footer y navegación fluida entre secciones.                                    | 3                |
| 17        | US002              | Landing – About Us / About the Product                | Sección explicando quiénes son y qué hace la plataforma.                                                 | 2                |
| 18        | US003              | Landing – Planes y precios                            | Sección de precios con planes para crear un hotel.                                                       | 3                |
| 19        | US004              | Landing – Contacto                                     | Sección con formulario funcional de contacto.                                                             | 3                |
| 20        | US005              | Landing – Despliegue público                           | Landing desplegada y accesible desde la web.                                                             | 1                |
